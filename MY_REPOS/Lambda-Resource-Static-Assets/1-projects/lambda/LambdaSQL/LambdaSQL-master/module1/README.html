<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <title>README</title>
    <style type="text/css">
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      span.underline {
        text-decoration: underline;
      }
      div.column {
        display: inline-block;
        vertical-align: top;
        width: 50%;
      }
    </style>
  </head>
  <body>
    <h1 id="unit-3-sprint-2-module-1">Unit 3 Sprint 2 Module 1</h1>
    <h1 id="introduction-to-sql">Introduction to SQL</h1>
    <p>
      The basics of Structured Query Language, a relatively simple query
      language.
    </p>
    <h2 id="learning-objectives">Learning Objectives</h2>
    <ul>
      <li>
        Write basic SQL queries to get specific subsets of data from a database
        and answer basic “business questions”
      </li>
      <li>
        Understand the purpose of SQL join, and perform joins to access data
        from multiple tables
      </li>
    </ul>
    <h2 id="before-lecture">Before Lecture</h2>
    <p>
      The Python Standard Library includes a module
      <a href="https://docs.python.org/3/library/sqlite3.html">sqlite3</a>, an
      API for data persistence via the SQLite - a simple disk-based database
      that doesn’t require a separate server process. Read the tutorial, and try
      the given examples. See if you can modify them in simple ways, and come
      with questions!
    </p>
    <p>
      Also, check out the
      <a href="https://sqlitebrowser.org">DB Browser for SQLite</a> - we’ll
      emphasize using <code>sqlite3</code> from Python so we can do things
      programmatically, but it is encouraged to install the DB Browser as a
      helpful utility for ad hoc inspection and querying.
    </p>
    <h2 id="live-lecture-task">Live Lecture Task</h2>
    <p>
      We’ll work together with SQLite in Python, making and exploring a simple
      database and trying a range of basic queries. Focus will be on the
      following SQL keywords:
    </p>
    <ul>
      <li><code>SELECT</code> - how we choose which columns to get</li>
      <li>
        <code>WHERE</code> - how we set conditions on the rows to be returned
      </li>
      <li><code>LIMIT</code> - when we only want a certain number of rows</li>
      <li><code>ORDER</code> - when we want to sort the output</li>
      <li>
        <code>JOIN</code> - when we need data from multiple tables combined
      </li>
    </ul>
    <p>
      We’ll also learn about how to use <code>CREATE TABLE</code> to specify a
      schema for our data, and <code>INSERT</code> statements to put data into a
      table. And lastly, we’ll learn how to calculate some basic statistics with
      <code>COUNT()</code>, <code>AVG()</code>, and <code>SUM()</code>,
      organized using the keyword <code>GROUP</code>.
    </p>
    <h2 id="assignment---part-1-querying-a-database">
      Assignment - Part 1, Querying a Database
    </h2>
    <p>
      This directory contains a file <code>rpg_db.sqlite3</code>, a database for
      a hypothetical webapp role-playing game. This test data has
      dozens-to-hundreds of randomly generated characters across the base
      classes (Fighter, Mage, Cleric, and Thief) as well as a few Necromancers.
      Also generated are Items, Weapons, and connections from characters to
      them. Note that, while the name field was randomized, the numeric and
      boolean fields were left as defaults.
    </p>
    <p>
      Use <code>sqlite3</code> to load and write queries to explore the data,
      and answer the following questions:
    </p>
    <ul>
      <li>How many total Characters are there?</li>
      <li>How many of each specific subclass?</li>
      <li>How many total Items?</li>
      <li>How many of the Items are weapons? How many are not?</li>
      <li>How many Items does each character have? (Return first 20 rows)</li>
      <li>How many Weapons does each character have? (Return first 20 rows)</li>
      <li>On average, how many Items does each Character have?</li>
      <li>On average, how many Weapons does each character have?</li>
    </ul>
    <p>
      You do not need all the tables - in particular, the
      <code>account_*</code>, <code>auth_*</code>, <code>django_*</code>, and
      <code>socialaccount_*</code> tables are for the application and do not
      have the data you need. the <code>charactercreator_*</code> and
      <code>armory_*</code> tables and where you should focus your attention.
      <code>armory_item</code> and <code>charactercreator_character</code> are
      the main tables for Items and Characters respectively - the other tables
      are subsets of them by type (i.e. subclasses), connected via a key (<code
        >item_id</code
      >
      and <code>character_id</code>).
    </p>
    <p>
      You can use the DB Browser or other tools to explore the data and work on
      your queries if you wish, but to complete the assignment you should write
      a file <code>rpg_queries.py</code> that imports <code>sqlite3</code> and
      programmatically executes and reports results for the above queries.
    </p>
    <p>
      Some of these queries are challenging - that’s OK! You can keep working on
      them tomorrow as well (we’ll visit loading the same data into PostgreSQL).
      It’s also OK to figure out the results partially with a query and
      partially with a bit of logic or math afterwards, though doing things
      purely with SQL is a good goal.
      <a
        href="https://www.w3resource.com/sql/subqueries/understanding-sql-subqueries.php"
        >Subqueries</a
      >
      and
      <a href="https://www.sqltutorial.org/sql-aggregate-functions/"
        >aggregation functions</a
      >
      may be helpful for putting together more complicated queries.
    </p>
    <h2 id="assigment---part-2-making-and-populating-a-database">
      Assigment - Part 2, Making and populating a Database
    </h2>
    <p>
      Load the data (use <code>pandas</code>) from the provided file
      <code>buddymove_holidayiq.csv</code> (the
      <a href="https://archive.ics.uci.edu/ml/datasets/BuddyMove+Data+Set"
        >BuddyMove Data Set</a
      >) - you should have 249 rows, 7 columns, and no missing values. The data
      reflects the number of place reviews by given users across a variety of
      categories (sports, parks, malls, etc.).
    </p>
    <p>Using the standard <code>sqlite3</code> module:</p>
    <ul>
      <li>
        Open a connection to a new (blank) database file
        <code>buddymove_holidayiq.sqlite3</code>
      </li>
      <li>
        Use <code>df.to_sql</code> (<a
          href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_sql.html"
          >documentation</a
        >) to insert the data into a new table <code>review</code> in the
        SQLite3 database
      </li>
    </ul>
    <p>
      Then write the following queries (also with <code>sqlite3</code>) to test:
    </p>
    <ul>
      <li>Count how many rows you have - it should be 249!</li>
      <li>
        How many users who reviewed at least 100 <code>Nature</code> in the
        category also reviewed at least 100 in the
        <code>Shopping</code> category?
      </li>
      <li>
        (<em>Stretch</em>) What are the average number of reviews for each
        category?
      </li>
    </ul>
    <p>
      Your code (to reproduce all above steps) should be saved in
      <code>buddymove_holidayiq.py</code>, and added to the repository along
      with the generated SQLite database.
    </p>
    <h2 id="resources-and-stretch-goals">Resources and Stretch Goals</h2>
    <p>
      For a more complicated example SQLite database with a number of tables to
      play with, check out this
      <a href="https://www.sqlitetutorial.net/sqlite-sample-database/"
        >SQLite Sample Database</a
      >.
    </p>
    <p>
      The RPG data also exists in a
      <a
        href="https://github.com/LambdaSchool/Django-RPG/blob/master/testdata.json"
        >JSON file</a
      >
      - try loading it with the standard
      <a href="https://docs.python.org/3.5/library/json.html">json module</a>,
      and reproducing the above queries with direct manipulation of the Python
      dictionaries. Also, try to load it into a <code>pandas</code> dataframe
      and reproduce the above queries with appropriate dataframe function calls.
    </p>
    <p>
      This database is part of a Django (Python webapp framework) application,
      the
      <a href="https://github.com/LambdaSchool/Django-RPG/tree/master"
        >Django-RPG</a
      >
      - check it out, and (though this is very much a stretch goal) you can
      <a href="https://www.djangoproject.com/start/">get started with Django</a>
      and see if you can run it (definitely use <code>pipenv</code>!). If you
      are able to, then you can use the the
      <a href="https://docs.djangoproject.com/en/2.1/topics/db/">Django ORM</a>
      (object-relational mapping, a way to interact with SQL through programming
      language objects), and
      <a href="https://docs.djangoproject.com/en/2.1/topics/db/queries/"
        >query</a
      >
      the data. You’ll find that the questions we answered with pure SQL are
      remarkably simple to answer using the ORM.
    </p>
    <p>
      If you need one more stretch goal - the RPG data was generated using
      <a href="https://github.com/volrath/django-autofixture"
        >django-autofixture</a
      >, a tool that facilitates tests by randomly generating data. Check it
      out, and if you got Django working, see if you can generate more data.
    </p>
  </body>
</html>
